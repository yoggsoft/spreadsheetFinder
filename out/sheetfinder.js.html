<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: sheetfinder.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: sheetfinder.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>;(function(window, document, undefined) {
    // use strict
    "use strict";
    var NAME ="sheetfinder";

    var url_prefix = 'https://spreadsheets.google.com/feeds/list/';
    var url_suffix = '/1/public/basic?alt=json';
    var payload;
    // var events = [];

    // Constructor
    function sheetfinder(key){
      this.key;
      this.url;
      this.trix = {};
      this.req;

    //   this.dispatch = function (key) {
    //     var dataObj;
    // 		if (events.hasOwnProperty(key)) {
    // 			dataObj = dataObj || {};
    // 			dataObj.currentTarget = sheetfinder;
    // 			for (var i in events[key]) {
    // 				events[key][i](dataObj);
    // 			}
    // 		}
    // 	};

    //   this.addEventListener = function (key,func) {
    // 		if (!events.hasOwnProperty(key)) {
    // 		    events[key] = [];
    // 		}
    // 		events[key].push(func);
    // 	};

    //   this.removeEventListener = function (key,func) {
    // 		if (events.hasOwnProperty(key)) {
    // 			for (var i in events[key]) {
    // 				if (events[key][i] === func) {
    // 					events[key].splice(i, 1);
    // 				}
    // 			}
    // 		}
    // 	};

    }
    
    /* Connects sheetfinder with spreadsheet and returns its content to DOM
    * 
    * @key: String, spreadsheet document key
    * @
    * 
    */
    /**
     * Connects sheetfinder with spreadsheet and returns its content to DOM
     * @param {String} key - the public spreadsheet key. 
     * @param {Bool} json_parsed - parse the spreadsheet daya
     * @param {Function} callback - executes when request succeeds 
     */

    sheetfinder.prototype.connect = function(key,json_parsed,callback){
      if (isValid(key)){
        this.key = key;
        this.url = url_prefix+this.key+url_suffix;
      
        // Ajax call
        var xhr = new XMLHttpRequest();
        xhr.open("GET",this.url,true);
        
        xhr.onreadystatechange = function(){
          if (xhr.readyState === 4){
            if(xhr.status >= 200 &amp;&amp; xhr.status &lt; 400){
              if(callback){
                callback(xhr.responseText);
              }
            }else{
              console.error('Connection established but something broke.');
            }
          }
        };
        xhr.send();
      }else{
        console.error('Doc Key is invalid. Make sure that the document is published and the Key is valid.');
      }
    };

    var handleParse = function(data){
      var spreadsheet = {};
      spreadsheet.title = data.feed.title;
  	  spreadsheet.author = data.feed.author;
      return spreadsheet;
    }

    // validates Doc key
    var isValid = function(val) {
      //  checks if String
      var isString = typeof val === 'string';
      // checks if empty
      var notEmpty = val !== '';
      // checks if null
      var notNull = val !== null;
      return (isString &amp;&amp; notEmpty &amp;&amp; notNull);
    };

  window[NAME] = sheetfinder;
})(window, document);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Wed May 18 2016 03:40:16 GMT+0000 (UTC)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
